 

[嵌入式面试问题 --- Embedded Interview Questions](https://docs.google.com/document/u/0/d/18HMyd-lFu1hWiixFLS2Pc7-SgyzDDqitzXbfAnUVeBE/mobilebasic?pli=1)

1.描述继承，多线程，看门狗计时器等

​    继承：继承使我们能够根据另一类定义类，这使创建和维护应用程序变得更加容易。继承允许在功能上重复使用代码并允许快速实现时间。

​    多线程：多线程是程序一次管理多个用户的使用，甚至可以由同一用户管理多个请求，而无需在计算机中运行多个编程副本。

​    看门狗计时器：WDT是一件硬件，可用于自动检测软件异常并在此（如果发生）（如果发生）（如果发生）时重置处理器。

2.什么是虚拟内存和缓存

虚拟内存是操作系统提供的一种抽象，允许程序使用比物理内存更大的内存空间。它通过硬盘空间扩展可用内存，让程序以为自己拥有连续的完整内存

缓存是介于CPU和主存之间的高速小容量存储器，用于减少CPU访问数据的延迟。

3.什么是原子编程/非锁定操作？

在计算机编程中，如果保证可以与可能同时发生的其他操作隔离，则将计算机进行的操作视为原子。原子操作是不可分割的。

4.什么是并发，并行性和多线程？

​     当应用程序能够同时执行两个任务时，我们将其称为并发应用程序。尽管这里的任务看起来同时运行，但从本质上讲，任务可能不会。他们利用操作系统的CPU时间布置功能，每个任务都运行其任务的一部分，然后转到等待状态。例如内存；转向所有任务，并让他们有机会完成。对于最终用户，似乎所有任务都在并行运行。这称为并发。

​    并行性不需要两个任务。从字面上，它实际上使用CPU的多核基础架构，通过为每个任务或子任务分配一个核心，同时使用多核基础架构运行任务或多个任务的一部分。基本上，并行性需要具有多个处理单元的硬件。在单一核心CPU中，您可能会获得并发性，但不能并行性。

 

5.volatile 关键字通过禁止编译器的优化行为，确保对特殊变量的访问安全可靠

 写一个宏定义 SET_BIT(reg, n)，将寄存器 reg 的第 n 位 (从 0 开始) 置 1，其他位保持不变。

\#define SET_BIT(reg, n)  ((reg) |= (1U << (n)))

 

void copy_data(char *src, int len) {

  char *dest = (char*)malloc(len);

  while(len--) *dest++ = *src++;

  free(dest);

}
 代码的主要问题？

内存释放错误（最严重）、未检查 malloc 返回值、函数设计无效（未返回结果）、可能未处理字符串结束符。


 1.内存泄漏/错误释放:

- free(dest) 试图释放一个并非由 malloc 返回的原始指针所指向的内存块，这会导致未定义行为（通常是程序崩溃或内存损坏）。正确的做法是保存 malloc 返回的原始指针，并在最后释放该原始指针。

 

2.未检查 malloc 返回值:

- malloc 在内存分配失败时会返回 NULL。代码没有检查 malloc 的返回值是否为 NULL。如果 malloc 失败，后续对 dest 的解引用     (*dest++) 会导致程序崩溃（空指针解引用）。应在 malloc 后检查返回值。

3.函数功能不明确/无效:

- 函数没有返回指向新分配内存的指针，调用者无法访问复制后的数据

4.未考虑字符串结束符 \0:

- 如果 src 指向的是一个     C     语言字符串，并且 len 是字符串长度（不包括 \0），那么 malloc(len) 分配的空间不足以存放末尾的 \0。即使 len 包含了 \0 的长度，循环 while(len--) 也只复制了 len 个字节，没有显式地在 dest 的末尾添加 \0。如果调用者期望得到一个有效的     C 字符串副本，这会导致问题。如果处理字符串，应分配 len + 1 字节并手动添加 \0。